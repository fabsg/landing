const form=document.getElementById("contact-form"),button=document.getElementById("btn-save"),formFields=form.querySelectorAll("input, select, textarea");function hideElementIfVisible(){let e=document.getElementById("contact-form"),t=document.getElementById("contact-button-wrapper");var n=e.getBoundingClientRect(),i=window.innerHeight;n.top<i&&n.bottom>=0?t.style.display="none":t.style.display="flex"}function hideForm(){let e=document.getElementById("form-wrapper"),t=document.getElementById("contact-button-wrapper");t.style.display="none",e.style.display="none"}function showForm(){let e=document.getElementById("form-wrapper"),t=document.getElementById("contact-button-wrapper");t.style.display="flex",e.style.display="flex"}function onClickRetry(){showForm();let e=document.getElementById("error");e.style.display="none"}function onClickSendFormData(){let e=document.getElementById("btn-save");e.setAttribute("disabled","disabled");let t=document.getElementById("form-loader");t.style.visibility="visible";let n=document.getElementById("nome"),i=document.getElementById("cognome"),l=document.getElementById("email"),o=document.getElementById("telefono"),a=document.getElementById("honeypot"),s=n.value,r=i.value,d=l.value,m=o.value,c=a.value,y=/^[a-zA-Z]{2,}$/;s&&y.test(s)&&r&&y.test(r)&&d&&/^[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}$/i.test(d)&&m&&/^\+?[0-9]{5,}$/.test(m)&&!c?fetch("/landing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,surname:r,email:d,phone:m})}).then(e=>e.json()).then(()=>{t.style.visibility="hidden",hideForm();let e=document.getElementById("success");e.style.display="flex"}).catch(()=>{hideForm();let e=document.getElementById("error");e.style.display="flex",t.style.visibility="hidden"}):console.log("form non valido error page")}function validateForm(){Array.from(formFields).every(e=>e.checkValidity())?button.removeAttribute("disabled"):button.setAttribute("disabled","disabled")}function pxToRem(e){return e/getCurrentBaseRem()+"rem"}function getCurrentBaseRem(){let e=window.innerWidth,t=16;return e>=1200?32:e>=992?24:e>=768?24:16}function setBaseRem(){document.documentElement.style.fontSize=getCurrentBaseRem()+"px"}function onClickContactButton(){let e=document.getElementById("form-wrapper"),t=document.getElementById("sticky-timer"),n=document.getElementById("contact-button-wrapper"),i=e.offsetTop-(t.offsetHeight+n.offsetHeight);window.scrollTo({top:i,behavior:"smooth"})}function calculateTimeRemaining(){var e=new Date,t=new Date("2024-03-31");t.setHours(23,59,59,999);var n=t-e;return{total:n,days:Math.floor(n/864e5),hours:Math.floor(n/36e5%24),minutes:Math.floor(n/1e3/60%60),seconds:Math.floor(n/1e3%60)}}function displayTimer(){var e=document.getElementById("timer"),t=calculateTimeRemaining();e.innerHTML=t.days+" giorni, "+t.hours+" ore, "+t.minutes+" minuti, "+t.seconds+" secondi",t.total>0&&setTimeout(displayTimer,1e3)}function accordionManaging(){var e,t=document.getElementsByClassName("accordion");for(e=0;e<t.length;e++)t[e].addEventListener("click",function(){this.classList.toggle("active");var e=this.nextElementSibling;e.style.maxHeight?e.style.maxHeight=null:e.style.maxHeight=pxToRem(e.scrollHeight)})}formFields.forEach(e=>{e.addEventListener("input",validateForm)}),"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.initExecuted||(hideElementIfVisible(),validateForm(),displayTimer(),accordionManaging(),setBaseRem(),window.scrollTo(0,0),window.initExecuted=!0),"loading"!==document.readyState?("scrollRestoration"in history&&(history.scrollRestoration="manual"),window.initExecuted||(hideElementIfVisible(),validateForm(),displayTimer(),accordionManaging(),setBaseRem(),window.scrollTo(0,0),window.initExecuted=!0,console.log("initExecuted on DOMContentLoaded"))):document.addEventListener("DOMContentLoaded",function(){"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.initExecuted||(hideElementIfVisible(),validateForm(),displayTimer(),accordionManaging(),setBaseRem(),window.scrollTo(0,0),window.initExecuted=!0,console.log("initExecuted on DOMContentLoaded"))}),window.addEventListener("scroll",hideElementIfVisible),document.addEventListener("visibilitychange",()=>{"visible"!==document.visibilityState||window.initExecuted||(hideElementIfVisible(),validateForm(),displayTimer(),accordionManaging(),setBaseRem(),window.initExecuted=!0,console.log("initExecuted visibilitychange"))}),window.addEventListener("resize",setBaseRem);